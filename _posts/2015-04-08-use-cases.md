---
title: Use Cases
categories: ios
layout: documentation
permalink: /:categories/:title
description: Learn more about using HOKO smart links to enhance your user experience.
---

In this section, we will highlight some use cases that you can fully implement in your app to **enhance your user experience**.

## Coupons / Discounts

![](/assets/images/use-case-coupon.png)

One way to take advantage of HOKO is by embedding your own **coupons or discounts** on your links. To do this, start by creating a new smart link and adding a new `metadata` entry to it, like the following:

{% highlight json %}
{
  "coupon": "save20",
  "value": "20"
}
{% endhighlight %}


After doing that, your link is fully ready to transmit metadata to your users. The following code shows how you can put this into practice with a very simple and straightforward example that shows an alert to the user displaying how much money they received with your coupon:


{% highlight objective-c %}
// AppDelegate.m

// addHandlerBlock: is going to be called every time your application opens a
// deeplink. if you prefer, you can focus on specific deeplink routes, to give
// a coupon/discount, by using mapRoute:toTarget:
[[Hoko deeplinking] addHandlerBlock:^(HOKDeeplink *deeplink) {
    // check if the deeplink has metadata for coupons
    if (deeplink.metadata[@"coupon"] && deeplink.metadata[@"value"]) {
        NSString *couponName = deeplink.metadata[@"coupon"];
        NSNumber *discountValue = deeplink.metadata[@"value"];

        // notify the user that they successfully redeemed your coupon
        UIAlertController *alertController = [UIAlertController
                                              alertControllerWithTitle:@"Congratulations"
                                              message:[NSString stringWithFormat:@"You just earned a $%@ through the coupon '%@' because you clicked on the right link!", discountValue, couponName]
                                              preferredStyle:UIAlertControllerStyleAlert];
        UIAlertAction *action = [UIAlertAction actionWithTitle:@"Awesome!" style:UIAlertActionStyleDefault handler:nil];
        [alertController addAction:action];
        [self.window.rootViewController presentViewController:alertController animated:YES completion:nil];
    }
}];
{% endhighlight %}

{% highlight swift %}
// AppDelegate.swift

// addHandlerBlock() is going to be called every time your application opens a
// deeplink. if you prefer, you can focus on specific deeplink routes, to give
// a coupon/discount, by using mapRoute(_:toTarget:)
Hoko.deeplinking().addHandlerBlock { (deeplink: HOKDeeplink) -> Void in
    // check if the deeplink has metadata for 'coupon'
    if let coupon = deeplink.metadata?["coupon"] {
        // notify the user that they successfully redeemed your coupon
        let alertController = UIAlertController(title: "Congratulations",
                                                message: "You just earned a $\(coupon) through a coupon because you clicked on the right link!", preferredStyle: .Alert)
        let action = UIAlertAction(title: "Awesome!", style: .Default, handler: nil)
        alertController.addAction(action)
        self.window?.rootViewController?.presentViewController(alertController, animated: true, completion: nil)
  }
}
{% endhighlight %}

<a href="https://github.com/hokolinks/HOKOstore" class="btn-next" target="_blank">Demo app using coupons (Swift) &#8594;</a>

## Referrals / Invites

Inviting or referring someone to use your app is an extremely simple process with HOKO and will definitely increase the user's level of engagement. Using our SDK, you will just need to generate a smart link for your invitations using custom `query parameters` and/or `metadata` and it's fully ready to be shared with the world.

{% highlight objective-c %}
#import <Hoko/Hoko.h>

- (IBAction)inviteButtonTapped:(id)sender {
  // First, we'll create a new deep link with the referrer data so
  // we can generate a smart link from it.
  // For this example, we will use the route "invite" for the deep links.
  //
  // NOTE: Make sure you're already mapping that route (in your AppDelegate.m,
  // for instance) before executing the following code,
  // otherwise the smart link generation won't work.
  NSString *referrerName = self.currentUser.name;
  HOKDeeplink *deeplink = [HOKDeeplink deeplinkWithRoute:@"invite"
                                         routeParameters:nil
                                         queryParameters:@{@"referrer": referrerName}
                                                metadata:nil];

  // After that, just call the generateSmartlinkForDeeplink SDK method
  // and we'll handle all the hard work for you
  [[Hoko deeplinking] generateSmartlinkForDeeplink:deeplink success:^(NSString *smartlink) {
    // A smart link was generated successfully. Let's share it!

    // Start by initializing a new iOS share sheet with your share message
    // and a URL object from the newly generated smart link
    NSString *shareMessage = @"Join me, this app is a-mazing!";
    NSURL *smartURL = [NSURL URLWithString:smartlink];
    UIActivityViewController *shareController = [[UIActivityViewController alloc] initWithActivityItems:@[shareMessage, smartURL]
                                                                                  applicationActivities:nil];

    // And... it's ready! Let's present the share popup to the user
    [self presentViewController:shareController animated:YES completion:nil];

  } failure:^(NSError *error) {
    // Ooops, looks like HOKO couldn't create your awesome Smart link
    // But don't be sad, the error description will clear up on what's wrong
    NSLog(@"%@", error.description);

    // Fail gracefully. Show an error popup, for instance
    [self showErrorPopup];
  }];
}
{% endhighlight %}

{% highlight swift %}
@IBAction func inviteButtonTapped(sender: AnyObject) {
  // First, we'll create a new deep link with the referrer data so
  // we can generate a smart link from it.
  // For this example, we will use the route "invite" for the deep links.
  //
  // NOTE: Make sure you're already mapping that route (in your
  // AppDelegate.swift, for instance) before executing the following code,
  // otherwise the smart link generation won't work.
  let referrerName = currentUser.name;
  let deeplink = HOKDeeplink(route: "invite", routeParameters: nil, queryParameters: ["referrer": referrerName], metadata: nil)

  // After that, just call the generateSmartlinkForDeeplink SDK method
  // and we'll handle all the hard work for you
  Hoko.deeplinking().generateSmartlinkForDeeplink(deeplink, success: { smartlink in
    // A smart link was generated successfully. Let's share it!

    if let smartURL = NSURL(string: smartlink) {
      // Start by initializing a new iOS share sheet with your share message
      // and a URL object from the newly generated smart link
      let shareMessage = "Join me, this app is a-mazing!"
      let shareController = UIActivityViewController(activityItems: [shareMessage, smartURL], applicationActivities: nil)

      // And... it's ready! Let's present the share popup to the user
      self.presentViewController(shareController, animated: true, completion: nil)  
    }

  }) { error in
    // Ooops, looks like HOKO couldn't create your awesome Smart link
    // But don't be sad, the error description will clear up on what's wrong
    println(error.description)

    // Fail gracefully. Show an error popup, for instance
    self.showErrorPopup()
  }
}
{% endhighlight %}

## Share on Social Networks

Sharing your app content on social media (such as Twitter or  Facebook) is crucial too keep the **buzz** and the **engagement** alive, and potentially **reach new customers**. With HOKO, doing that is so **simple** that anybody can do it.  

In this example, our app is a restaurant booking application where users can share to their friends, on social media, where they are eating along with a Smart link that redirects users to that specific restaurant inside the app.

{% highlight objective-c %}
- (IBAction)shareToSocialNetworksButtonTapped:(id)sender {
  // First, we'll create a new deep link with the restaurant ID so
  // we can generate a smart link from it.
  // For this example, we will use the route "restaurant/:restaurant_id"
  // for the deep links.
  //
  // NOTE: Make sure you're already mapping that route (in your AppDelegate.m,
  // for instance) before executing the following code,
  // otherwise the smart link generation won't work.
  NSNumber *restaurantID = @(self.currentRestaurant.uniqueID);
  HOKDeeplink *restaurantDeeplink = [HOKDeeplink deeplinkWithRoute:@"restaurant/:restaurant_id"
                                                  routeParameters:@{@"restaurant_id": restaurantID}];

  // Ask HOKO to generate a new Smart link
  [[Hoko deeplinking] generateSmartlinkForDeeplink:restaurantDeeplink success:^(NSString *smartlink) {
    // The restaurant Smart link was generated successfully. Let's share it.

    NSString *shareMessage = [NSString stringWithFormat:@"Currently having dinner at %@ and it's great!", self.currentRestaurant.name];
    NSURL *smartURL = [NSURL URLWithString:smartlink];
    UIActivityViewController *shareController = [[UIActivityViewController alloc] initWithActivityItems:@[shareMessage, smartURL]
                                                                                  applicationActivities:nil];

    // And... it's ready! The following line displays the share
    // popup to the user and your smart links will start flying
    [self presentViewController:shareController animated:YES completion:nil];

  } failure:^(NSError *error) {
    // Oopsie, an error occurred while generating your awesome Smart link.
    // But fear not, peak into the error's description to see what went wrong.
    NSLog(@"%@", error.description);
  }];
}
{% endhighlight %}

{% highlight swift %}
@IBAction func shareToSocialNetworksButtonTapped(sender: AnyObject) {
  // First, we'll create a new deep link with the restaurant ID so
  // we can generate a smart link from it.
  // For this example, we will use the route "restaurant/:restaurant_id"
  // for the deep links.
  //
  // NOTE: Make sure you're already mapping that route (in your
  // AppDelegate.swift, for instance) before executing the following code,
  // otherwise the smart link generation won't work.
  let restaurantID = String(currentRestaurant.uniqueID)
  let restaurantDeeplink = HOKDeeplink(route: "restaurant/:restaurant_id", routeParameters: ["restaurant_id": restaurantID])

  // Ask HOKO to generate a new Smart link
  Hoko.deeplinking().generateSmartlinkForDeeplink(restaurantDeeplink, success: { smartlink in
    // The restaurant Smart link was generated successfully. Let's share it.

    if let smartURL = NSURL(string: smartlink) {
      let shareMessage = "Currently having dinner at \(self.currentRestaurant.name) and it's great!"
      let shareController = UIActivityViewController(activityItems: [shareMessage, smartURL], applicationActivities: nil)

      // And... it's ready! The following line displays the share
      // popup to the user and your smart links will start flying
      self.presentViewController(shareController, animated: true, completion: nil)  
    }

  }) { error in
    // Oopsie, an error occurred while generating your awesome Smart link.
    // But fear not, peak into the error's description to see what went wrong.
    println(error.description)
  }
}
{% endhighlight %}

## Embed in Text Messages

We truly believe that embedding HOKO Smart links in SMSes sent by your current users to potential new ones can be a **powerful way** of **promoting** your app, with deep linked content, through **word of mouth**. With this in mind, our SDK allows the developers to do that very easily. Your Smart text messages will be up and running in no time.  

In the following code section, we will show you how to do it.

{% highlight objective-c %}
#import <Hoko/Hoko.h>

// First step: To work with SMS, you will need to import the following
// framework. You can import it right on your .m file
#import <MessageUI/MessageUI.h>

// Next up: make sure your view controller conforms to the
// MFMessageComposeViewControllerDelegate delegate.
@interface YourViewController () <MFMessageComposeViewControllerDelegate>

@end

. . .

- (IBAction)shareSMSButtonTapped:(id)sender {
  // Before actually sending the message, we need to check if the device
  // supports SMS
  if ([MFMessageComposeViewController canSendText]) {
    // Cool, we're good to go!

    // For this example, we will share a smart link for one product inside
    // the app and, therefore, we will use the route "product/:product_id"
    // for the product deep links.
    //
    // NOTE: Make sure you're already mapping that route (in your
    // AppDelegate.m, for instance) before executing the following code,
    // otherwise the smart link generation won't work.
    NSString *productID = [NSString stringWithFormat:@"%li", self.currentProduct.uniqueID];
    HOKDeeplink *productDeeplink = [HOKDeeplink deeplinkWithRoute:@"product/:product_id"
                                                  routeParameters:@{@"product_id": productID}];

    [[Hoko deeplinking] generateSmartlinkForDeeplink:productDeeplink success:^(NSString *smartlink) {
      // The Smart link was generated successfully. Let's send it

      MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
      controller.body = [NSString stringWithFormat:@"Hey! You should check out this product. I have a feeling that you'll love it. %@", smartlink];
      controller.messageComposeDelegate = self;
      [self presentViewController:controller animated:YES completion:nil];

    } failure:^(NSError *error) {
      // Oh no! There was an error while trying to generate a
      // new HOKO Smart link.
      NSLog(@"%@", error.description);

      // Notify the user that an error occurred.
      [self displayErrorAlert];
    }];
  } else {
    // Bummer... Looks like the device does not support SMS
  }
}

// Final step: implement the MFMessageComposeViewController delegate method
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {
  switch (result) {
    case MessageComposeResultSent:
      // The SMS was successfully sent
      break;

    case MessageComposeResultCancelled:
      // Looks like the user cancelled the SMS
      break;

    default:
      // Failed sending a message
      break;
  }

  // Dismiss the SMS view controller so the user gets back to your app
  [controller dismissViewControllerAnimated:YES completion:nil];
}
{% endhighlight %}

{% highlight swift %}
// First step: To work with SMS, you will need to import the MessageUI framework
import MessageUI

. . .

@IBAction func shareSMSButtonTapped(sender: AnyObject) {
  // Before actually sending the message, we need to check if the device
  // supports SMS
  if MFMessageComposeViewController.canSendText() {
    // Cool, we're good to go!

    // For this example, we will share a smart link for one product inside
    // the app and, therefore, we will use the route "product/:product_id"
    // for the product deep links.
    //
    // NOTE: Make sure you're already mapping that route (in your
    // AppDelegate.swift, for instance) before executing the following code,
    // otherwise the smart link generation won't work.
    let productID = String(currentProduct.uniqueID)
    let productDeeplink = HOKDeeplink(route: "product/:product_id", routeParameters: ["product_id": productID])

    Hoko.deeplinking().generateSmartlinkForDeeplink(productDeeplink, success: { smartlink in
      // The Smart link was generated successfully. Let's send it

      let controller = MFMessageComposeViewController()
      controller.body = "Hey! You should check out this product. I have a feeling that you'll love it. \(smartlink)"
      controller.messageComposeDelegate = self
      self.presentViewController(controller, animated: true, completion: nil)

    }) { error in
      // Oh no! There was an error while trying to generate a
      // new HOKO Smart link.
      println(error.description)

      // Notify the user that an error occurred.
      self.displayErrorAlert()
    }
  } else {
    // Bummer... Looks like the device does not support SMS
  }
}

. . .

// Final step: we need to make sure our View Controller conforms to the
// MFMessageComposeViewControllerDelegate delegate
extension YourViewController: MFMessageComposeViewControllerDelegate {
  func messageComposeViewController(controller: MFMessageComposeViewController, didFinishWithResult result: MessageComposeResult) {
    switch (result.rawValue) {
    case MessageComposeResultSent.rawValue:
      // The SMS was successfully sent
      break

    case MessageComposeResultCancelled.rawValue:
      // Looks like the user cancelled the SMS
      break

    default:
      // Failed sending a message
      break
    }

    // Dismiss the SMS view controller so the user gets back to your app
    controller.dismissViewControllerAnimated(true, completion: nil)
  }
}
{% endhighlight %}

And... That's it! So simple, right?

## Push Notifications

![](/assets/images/push-notification-use-case.png)

Another way of using HOKO smart links inside your app is to send them via your push notifications. In this guide, we will show you how to do it with **Parse** and **Mixpanel**.

### With Parse:

To setup your push notifications with Parse, check out <a href="https://parse.com/tutorials/ios-push-notifications" target="_blank">this great guide</a>, created by the folks at Parse, to get started with their push service.  

After setting up your application, your notifications' `JSON` data should contain, at least, the following `key / value` entries (note that you can use your own custom domain on `smartlink`):

{% highlight json %}
{
  "alert": "Hi! This is my super awesome notification title.",
  "smartlink": "https://yourapp.hoko.link/superawesomelink"
}
{% endhighlight %}  

### With Mixpanel:

Check out <a href="https://mixpanel.com/help/reference/ios-push-notifications" target="_blank">this great guide</a> to setup your app in order to start receiving Push Notifications and this <a href="https://mixpanel.com/help/questions/articles/how-do-i-send-custom-parameters-like-emoji-in-my-push-notifications" target="_blank">guide</a> to start sending them from your Dashboard.

After setting up your application, your notifications' `JSON` data should contain, at least, the following `key / value` entries (note that you can use your own custom domain on `smartlink`):

{% highlight json %}
{"aps": {"alert": "Hi! This is my super awesome notification title.", "smartlink": "https://yourapp.hoko.link/superawesomelink"}}
{% endhighlight %}

### Finally (for both services):

To decode and process your notifications on the user's device, make sure you have the `application:didReceiveRemoteNotification:` delegate method implemented and the rest is easy as pie! The following code shows you how:

{% highlight objective-c %}
// AppDelegate.m
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
  // check if the push notification has the key "smartlink"
  if (userInfo[@"smartlink"]) {
    // if so, call HOKO's openSmartlink: and we'll take care of it for you
    // by sending the request to the appropriate route for that smartlink
    [[Hoko deeplinking] openSmartlink:userInfo[@"smartlink"]];
  } else {
    // otherwise, process the notification with your own code
    // in this case, processUserActivity: would be one of your methods
    [self processPushNotification:userInfo];
  }
}
{% endhighlight %}

{% highlight swift %}
// AppDelegate.swift
func application(application: UIApplication, didReceiveRemoteNotification userInfo: [NSObject : AnyObject]) {
  // check if the push notification has the key "smartlink"
  if let smartlink = userInfo["smartlink"] as? String {
    // if so, call HOKO's openSmartlink() and we'll take care of it for you
    // by sending the request to the appropriate route for that smartlink
    Hoko.deeplinking().openSmartlink(smartlink)
  } else {
    // otherwise, process the notification with your own code
    // in this case, processUserActivity() would be one of your methods
    processPushNotification(userInfo)
  }
}
{% endhighlight %}

After this, you're finally ready to become a Push Notifications Sensei.

## Linking to Other Apps

Linking to other apps, commonly known as **Outbound Traffic**, is the flux of users that exit your app to another app or website to perform some action or just to continue your business workflow.  

With that in mind, HOKO SDK provides a very simple interface that allows you to quickly generate smart links with custom URLs for each platform (iOS universal, iPhone, iPad, Android and/or Web), which makes it easier to create and share platform-personalized links for your outbound traffic needs. The process to achieve that is fairly simply to execute with just a few of line codes:

{% highlight objective-c %}
// create your deeplink object with the twitter URLs for each platform.
// we will use Tweetbot on iOS, Twitter on Android and twitter.com on Web
HOKDeeplink *deeplink = [HOKDeeplink deeplink];
[deeplink addURL:@"tweetbot://hokolinks/timeline" forPlatform:HOKDeeplinkPlatformIOSUniversal];
[deeplink addURL:@"twitter://user?screen_name=hokolinks" forPlatform:HOKDeeplinkPlatformAndroid];
[deeplink addURL:@"https://twitter.com/hokolinks" forPlatform:HOKDeeplinkPlatformWeb];

// now that it is created, generate a smart link
// and let HOKO do the hard work for you
[[Hoko deeplinking] generateSmartlinkForDeeplink:deeplink
                                         success:^(NSString *smartlink) {
  // your smart link was generated successfully
  NSLog(@"smartlink: %@", smartlink);
} failure:^(NSError *error) {
  // an error occurred while trying to generate the smart link
  NSLog(@"%@", error.description);
}];
{% endhighlight %}

{% highlight swift %}
// create your deeplink object with the twitter URLs for each platform.
// we will use Tweetbot on iOS, Twitter on Android and twitter.com on Web
let deeplink = HOKDeeplink()
deeplink.addURL("tweetbot://hokolinks/timeline", forPlatform: .IOSUniversal)
deeplink.addURL("twitter://user?screen_name=hokolinks", forPlatform: .Android)
deeplink.addURL("https://twitter.com/hokolinks", forPlatform: .Web)

// now that it is created, generate a smart link
// and let HOKO do the hard work for you
Hoko.deeplinking().generateSmartlinkForDeeplink(deeplink, success: { (smartlink: String) -> Void in
  // your smart link was generated successfully
  println("smartlink: \(smartlink)")
}) { (error: NSError) -> Void in
  // an error occurred while trying to generate the smart link
  println(error.description)
}
{% endhighlight %}

## One click login

Nowadays, most modern apps and APIs use some sort of OAuth or another token-based login session. With HOKO you can leverage it to the next level. Let's take an approach similar to Slack's Magical Link login.

![](/assets/images/slack-one-click-login.png)

After inputting your email you are presented with a **Send Magic Link** button and a **Type password instead** button. Let's focus on the first one. What this does is request the server to send an email to the user's account, which contains a link carrying the user's token to be passed to the app through their deep linking logic.

For this to work on your app you need to integrate with HOKO on both your back-end and your app. First you need to add a "request one click login" API, which will most likely receive the user's email and some other meta-data. Then, when a request comes in, the server will email the user's email with a lazy smart link (e.g. `http://app.hoko.link/lazy?uri=%2flogin%2F<user-authentication-token>`).

For the application, all we need to do is map a `login/:auth_token` route and set the user's token without ever needing the user's password.

{% highlight objective-c %}
[[Hoko deeplinking] mapRoute:@"login/:auth_token"
                    toTarget:^(HOKDeeplink *deeplink) {
  // This should request the app's server for the user information regarding this authentication token
  // and let the user see the app's content.
  [[LoginHelper sharedInstance] loginWithToken:deeplink.routeParameters[@"auth_token"]];
}];
{% endhighlight %}

{% highlight swift %}
Hoko.deeplinking().mapRoute("login/:auth_token", toTarget: {
  (deeplink: HOKDeeplink) -> Void in
    // This should request the app's server for the user information regarding this authentication token
    // and let the user see the app's content.
    LoginHelper.sharedInstance().loginWithToken(deeplink.routeParameters["auth_token"])
})
{% endhighlight %}
